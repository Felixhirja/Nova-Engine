# Faction System Specification

_Last updated: October 2025_

## Runtime Surfaces

- **ECS Component:** `Faction` (`src/ecs/Components.h`) stores the owning faction ID per entity (ships, stations, celestial bodies).
- **Celestial Metadata:** `CelestialBodyComponent::faction` mirrors ECS ownership for planets, moons, and stations generated by `SolarSystemGenerator`.
- **Economy Hooks:** `SpaceStationComponent` fields (`availableServices`, `wealthLevel`, `hasMarket`, etc.) expose the services unlocked by faction reputation.
- **Progression:** Reputation thresholds act as prerequisites for ship `ProgressionTier`s and mission chains (see `docs/player_progression_system.md`).

Faction data should live in `assets/factions/factions.json` (TBD) with the schema:

```json
{
  "id": 1,
  "name": "Helios Dominion",
  "alignment": "Authoritarian",
  "tags": ["military", "core_worlds"],
  "standingRange": [-100, 100],
  "startingStanding": 0,
  "services": {
    "docking": true,
    "shipyard": true,
    "blackMarket": false
  },
  "reputationRewards": [
    { "threshold": 20, "reward": "mission:hel_dominion_patrol" },
    { "threshold": 40, "reward": "ship:escort_carrier" },
    { "threshold": 60, "reward": "component:navy_plasma_cannon" }
  ]
}
```

## Major Factions

| ID | Name | Pillars | Typical Territory | Reputation Benefits |
|----|------|---------|-------------------|---------------------|
| 1 | **Helios Dominion** | Militaristic successor state safeguarding core colonies. | Inner-system bastions, fortified moons, military stations. | Unlocks navy-grade weapons, escort carrier hulls (Tier 2), high-paying patrol/bounty contracts. |
| 2 | **Auroran Combine** | Technocratic trade league favouring neutrality and infrastructure. | Habitable-zone trade hubs, jump gate intersections. | Reduced market taxes, premium cargo missions, access to combine logistics modules. |
| 3 | **Orion Prospectors Guild** | Union of miners and refiners pushing into frontier belts. | Dense asteroid belts, refinery outposts, mining flotillas. | Mining licenses, bulk ore contracts, industrial blueprint discounts. |
| 4 | **Voidbound Syndicate** | Smuggler coalition and black-market brokers. | Shadow ports near Lagrange points, derelict habitats. | Access to black-market modules, smuggling missions with high risk/high reward, laundering of contraband. |
| 5 | **Lumen Research Collective** | Academic alliance pursuing stellar anomalies. | Research stations around exotic phenomena and flare-prone stars. | Experimental tech unlocks, science mission chains, reduced blueprint credit costs for science modules. |
| 6 | **Frontier Wardens** | Volunteer militia protecting fledgling colonies. | Outer colonies, ice-giant moons, convoy routes. | Defensive turret blueprints, humanitarian aid missions, reduced repair costs in contested systems. |
| 7 | **Free Traders League** | Loose confederation of independent merchants and explorers. | Mobile convoys, neutral stations, trade lanes. | Trade permits, price arbitrage intel, access to unique explorer ship variants. |

## Reputation Bands

| Standing | Label | Station Behaviour | Mission Availability |
|----------|-------|-------------------|---------------------|
| ≤ -50 | Hostile | Deny docking, spawn interceptor patrols on sight. | Only conflict/retaliation encounters. |
| -49 to -10 | Wary | Limited docking (refuel only), increased tariffs. | Low-tier contracts, mostly courier work. |
| -9 to +9 | Neutral | Standard services, baseline pricing. | Core mission pool available. |
| +10 to +39 | Friendly | Reduced fees, access to faction vendors. | Tier 2 mission chains, faction-specific components. |
| +40 to +69 | Allied | Priority docking, security escorts, discount repairs. | Tier 3 ship unlocks, co-op fleet operations. |
| ≥ +70 | Exalted | Immediate distress call support, unique narrative missions. | Legendary hull blueprints, experimental modules. |

## Dynamic Events & Territory Control

1. **Territory Influence Score** – Weighted blend of stationed military assets, trade volume, and recent mission outcomes. Drives AI fleet spawns and economy multipliers.
2. **Conflict States** – Faction pairs can enter war/ceasefire/truce states. War triggers blockade events (adjusts `availableServices`) and escalates combat encounters. Diplomacy skills can influence these timers.
3. **Takeover Mechanics** – Completing specific mission arcs can flip station ownership. Update ECS `Faction` component and associated celestial metadata; broadcast changes to economy and mission subsystems.

## Integration Checklist

- [ ] Author faction data file with IDs matching runtime enums/constants.
- [ ] Extend mission scripting to query `FactionStanding` for branching dialogue and rewards.
- [ ] Implement reputation change pipeline with telemetry (who granted/removed standing and why).
- [ ] Update UI: faction codex, standing meter, station service availability indicators.
- [ ] Connect procedural generation heuristics (see `docs/solar_system_generation.md`) to use faction weighting tables defined here.

