# Nova-Engine Development Roadmap ‚Äì Next Steps

*** STAR CITIZEN-STYLE SPACESHIP GAME PROJECT ***

---

## PHASE 1: FOUNDATION (Next 1‚Äì2 months)

‚úÖ Game Design Document [COMPLETE - Living Document] (Status reconfirmed after solar system design sync)
‚úÖ Core mechanics documented
‚úÖ Solar system concept outlined
‚úÖ Spaceship types defined
‚úÖ Progression systems planned

**PERIODIC UPDATES:**
‚ñ° Enhance solar system generation details (align with implementation)
‚ñ° Add detailed spaceship component specifications
‚ñ° Define player progression and skill systems
‚ñ° Expand faction system with specific factions
‚ñ° Add resource and crafting system details

See `docs/game_design_enhancements.md` for enhancement roadmap
**Current Status:** Comprehensive foundation complete, refinements optional

‚úÖ Spaceship Classes & Components [75% COMPLETE - Core Systems Functional]
‚úÖ Design & taxonomy complete (`docs/spaceship_taxonomy.md`) - Professional quality
‚úÖ Core data structures implemented (`src/Spaceship.h`)
‚úÖ Ship assembly system working (`src/ShipAssembly.h/cpp`) - 95% complete
‚úÖ Gameplay systems functional (targeting, weapons, shields, energy)
‚úÖ Feedback systems complete (visual/audio frameworks)
‚úÖ Art pipeline established (`docs/ship_art_pipeline.md`)
‚úÖ Testing infrastructure in place (`tests/test_ship_assembly.cpp`)

**HIGH PRIORITY REMAINING:**
‚úÖ Text rendering system (COMPLETE + INTEGRATED ‚úÖ)
- ‚úÖ `src/TextRenderer.h/cpp` created with full API (390 lines)
- ‚úÖ Multiple font sizes, colors, alignment, shadows, word wrapping
- ‚úÖ Printf-style formatting with va_args
- ‚úÖ Test suite complete: `tests/test_text_rendering.cpp` (all tests passing)
- ‚úÖ Documentation: `docs/text_rendering_integration.md` (500+ lines)
- ‚úÖ INTEGRATED into `Viewport3D::DrawHUD()` with enhanced ship stats
- ‚úÖ Build successful, ready for runtime testing
- See: `docs/text_rendering_viewport_integration.md` for integration details

üîÑ **Text renderer follow-up tasks (NEW 2025-10-11):**
‚ñ° Expand HUD usage beyond ship stats (threat indicators, target locking prompts)
- Replace final GLUT strings in diagnostics overlays with TextRenderer API
- Gate new overlays behind debug toggles to avoid clutter during flight
‚ñ° Create fallback font atlas & localization hooks
- Load emergency bitmap font when TrueType assets missing
- Stub layout direction switch for right-to-left languages
‚ñ° Add regression coverage for multiline layout edge cases
- Snapshot baseline outputs for 4:3, 16:9, 21:9 aspect ratios
- Stress test wrap/ellipsis behaviour through automated headless run
‚ñ° Component validation with user-friendly error messages (use TextRenderer)
‚ñ° Advanced performance model (heat buildup, power overload)
‚ñ° Physics integration (coordinate with Advanced Physics Engine)
‚ñ° Damage model implementation (per-component health, cascading failures)
‚ñ° Weapon firing pipeline completion
- Flesh out `WeaponSystem::FireWeapon` to spawn projectile entities tied to hardpoints
- Attach muzzle flash, recoil, and heat events to Feedback systems when firing
- Query transform/weapon mount data for accurate spawn positions + 3D audio emitters
- Persist projectile ownership for damage attribution and AI threat evaluation
‚ñ° Target acquisition safeguards
- Finish `TargetingSystem` validation (entity existence, transform availability, range/LOS)
- Add graceful failure paths that surface issues through the feedback HUD
- Write regression tests that cover invalid/edge targeting cases

**MEDIUM PRIORITY:**
‚ñ° Cargo management system (for freighters)
‚ñ° Crew management system (station assignments, skills)
‚ñ° Ship progression/unlock system (research trees, reputation gates)
‚ñ° Cockpit/bridge UI (requires text rendering first)
‚ñ° Flight assist controls (auto-level, dampening, modes)
‚ñ° Fuel management loops (propellant tracking, refueling gameplay, mission range tools)
‚ñ° Docking and hangar interactions (alignment guidance, airlocks, cargo transfer)
‚ñ° Life support management (environmental controls, consumables, failure responses)

See `todo_spaceship.txt` for complete detailed task list
See `docs/spaceship_implementation_status.md` for comprehensive assessment
**Current Status:** Strong foundation complete - 100‚Äì150 hours to full feature completion
**Estimated:** ~4‚Äì6 weeks for Phase 1 completion

‚ñ° **Advanced Physics Engine**

* Implement realistic spaceship physics (thrust, momentum, inertia, atmospheric flight)

‚è≥ **Solar System Generation [IN PROGRESS]**
‚úÖ Design document created (`docs/solar_system_generation.md`)
‚úÖ Component structures defined (`src/CelestialBody.h`)
‚úÖ Core headers created (`SolarSystem.h`, `SolarSystemGenerator.h`)
‚úÖ Task breakdown with time estimates (`docs/solar_system_tasks.md`)
‚úÖ Quick reference guide (`docs/solar_system_quickref.md`)

**NEXT STEPS:**
‚ñ° Implement `SolarSystem.cpp` (Phase 1, Task 1.3)
‚ñ° Implement basic circular orbits (Phase 1, Task 1.4)
‚ñ° Create basic visualization with colored spheres (Phase 1, Task 1.5)
‚ñ° Implement `SolarSystemGenerator.cpp` star generation (Phase 2, Task 2.1)
‚ñ° Complete procedural planet generation (Phase 2, Tasks 2.3‚Äì2.7)

‚è≥ **Rendering & Visual Polish [PLANNED]**
‚úÖ High level design captured in `docs/advanced_graphics_implementation.md`
‚úÖ Shader modernization goals defined in `docs/opengl_modernization_summary.md`
‚ñ° Port forward renderer to new shader architecture (`src/renderer/*`)
‚ñ° Integrate HDR pipeline and tone mapping (reference `docs/postprocess_implementation_summary.md`)
‚ñ° Add particle renderer hooks to engine loop (`docs/particle_rendering_integration.md`)
‚ñ° Build automated screenshot harness for regression testing (`scripts/`, `docs/postprocess_usage_examples.md`)
‚ñ° Document asset authoring workflow updates (`docs/ship_art_pipeline.md`)
‚ñ° Establish SVG asset workflow for HUD and UI elements
- Hook `ResourceManager` SVG ingestion to tessellate icons or bake SDF atlases
- ‚úÖ `LoadSVGSurface` now exposes DPI-aware rasterization options so fallback bitmap atlases can be generated at multiple resolutions
- Update Viewport3D HUD pipeline to load vector icons at runtime
- Provide SVG layout exports for designers to review HUD alignments

See `docs/solar_system_tasks.md` for complete roadmap (275‚Äì377 hours estimated)
**Current Phase:** Phase 1 ‚Äì Core Framework (22‚Äì32 hours)

---

## PHASE 2: CORE GAMEPLAY (3‚Äì6 months)

‚ñ° Ship Building & Customization ‚Äì modular parts, weapons, customization

‚ñ° Combat System ‚Äì targeting, weapons, damage, shields

‚ñ° Planetary Landing & Exploration ‚Äì landing + exploration for planets/stations

‚ñ° Economy & Trading ‚Äì markets, commodities, player-driven economy

---

## PHASE 3: MULTIPLAYER & WORLD (6‚Äì12 months)

‚ñ° Multiplayer Framework ‚Äì networking for interactions + persistent universe

‚ñ° Faction & Mission System ‚Äì missions, reputation, territorial control

‚ñ° Advanced Graphics & Effects ‚Äì shader system, particles, dynamic lighting/shadows

‚ñ° AI & NPC Systems ‚Äì AI for NPCs/pirates, procedural missions, dynamic events

---

## *** CRITICAL ENGINE FIXES (2025-10-10) ***

### PHASE 4.5: UI BATCHING [COMPLETED 2025-01-XX]

‚úÖ UI Batching Implementation Complete
‚úÖ Migrated HUD rendering from immediate mode OpenGL to batched rendering
‚úÖ Integrated `UIBatcher` into `Viewport3D::DrawHUD()`
‚úÖ Eliminated ~35 immediate mode calls for 20x+ draw call reduction potential
‚úÖ Fixed GLUT initialization issues for proper text rendering
‚úÖ Added GLUT header inclusion (`<GL/freeglut.h>`) to `Viewport3D.cpp`
‚úÖ Successfully compiled and tested - engine runs with batched HUD
‚úÖ Performance gains: Reduced from ~35 glBegin/glEnd calls to 1‚Äì2 batched calls
‚úÖ Text rendering fully functional with `glutInit()` after GLAD setup
‚úÖ Coordinate systems properly mapped (screen space for UI elements)
‚úÖ Color handling integrated (RGBA float values 0.0‚Äì1.0)
‚úÖ Build successful, runtime tested, no regressions
‚úÖ Documentation: `docs/uibatcher_implementation.md` updated with completion notes

### IMMEDIATE FIXES REQUIRED (High Priority)

‚ñ° Fix GLFW initialization crash

* `glfwInit()` fails immediately on current system
* **LIKELY CAUSE: Requesting legacy OpenGL 2.1 on modern GPU**
* Modern drivers may have poor support for old OpenGL versions
* Try requesting OpenGL 4.3+ instead (see OpenGL 4.x upgrade)
* Investigate GPU driver compatibility (update drivers?)
* Try older GLFW version (3.3.x instead of 3.4)
* Alternative: Implement native Windows OpenGL context creation
* Test on different hardware to isolate issue
* Consider GLEW + manual context creation as fallback
* Document required GPU/driver versions

‚ñ° Fix XInput preloading crash

* `LoadLibraryW(L"XInput1_4.dll")` causes immediate crash
* Add better error handling with try-catch or SEH
* Investigate delay-loading XInput
* Test with different XInput versions (1_3, 9_1_0)
* Make gamepad support optional and graceful
* Add runtime detection of XInput availability

‚ñ° Fix build system clean target

* Makefile uses Unix `rm` which fails on Windows
* Add PowerShell-compatible clean commands
* Use cross-platform approach: `del` for Windows, `rm` for Unix
* Test clean target works properly

‚ñ° Fix shell command errors in output

* "The system cannot find the path specified" appears during run
* "'true' is not recognized" error in console
* Investigate source of these spurious commands
* Clean up build/run scripts

‚úÖ **SDL Dependencies [COMPLETED 2025-10-10]**
‚úÖ Removed SDL2 and SDL_mixer from build
‚úÖ Deleted SDL DLLs (`SDL2.dll`, `SDL2_mixer.dll`)
‚úÖ Audio system now compiles without SDL_mixer (graceful fallback)
‚úÖ Makefile SDL detection removed

‚úÖ **Headless Mode Implementation [COMPLETED 2025-10-10]**
‚úÖ Env var: `NOVA_ENGINE_HEADLESS="1"`
‚úÖ Bypasses GLFW/OpenGL initialization
‚úÖ Frame limiter: `NOVA_ENGINE_MAX_FRAMES` (default: 300)
‚úÖ All game logic runs correctly without graphics
‚úÖ Input system handles null window gracefully
‚úÖ `Viewport3D::Render()` skips rendering in headless mode
‚úÖ Clean shutdown after frame limit reached
‚úÖ Documented in `docs/todo/TODO_IMPROVEMENTS.md`

‚úÖ **Camera Direction Fix [COMPLETED 2025-10-10]**
‚úÖ Changed initial yaw from 0.0 to œÄ/2 (1.5708 radians)
‚úÖ Camera now looks toward player at origin
‚úÖ Position: (-8, 0, 6) looking in +X direction
‚úÖ Pitch: -0.1 (slight downward angle)
‚úÖ Zoom: 12.0

---

## DEPENDENCY & DLL MANAGEMENT

‚ñ° Create DLL checker script

* PowerShell script to verify all required DLLs present
* Auto-copy missing DLLs from MSYS2 to project directory
* Run before every build/execution

**Required DLLs:**

* `glfw3.dll` (graphics)
* `libfreeglut.dll` (OpenGL utility)
* `libgcc_s_seh-1.dll` (MinGW runtime)
* `libstdc++-6.dll` (C++ standard library)
* `libwinpthread-1.dll` (threading)
* `xinput1_4.dll` (gamepad, optional)

‚ñ° Document all dependencies clearly

* Create `DEPENDENCIES.md` with versions
* List MSYS2 packages needed
* Add troubleshooting section for common issues
* Include alternative download sources

‚ñ° Consider vcpkg or Conan

* Investigate package managers for C++ dependencies
* Could simplify GLFW, OpenGL, audio library management
* Test cross-platform compatibility

---

## CAMERA SYSTEM IMPROVEMENTS

‚ñ° Test camera with new direction

* Verify all camera presets work with œÄ/2 yaw
* Test free camera mode with mouse look
* Test target lock mode with corrected angles
* Verify camera-to-world coordinate transforms

‚ñ° Add camera debug visualization

* Draw camera frustum in world space
* Show look-at target as colored marker
* Display camera vectors (forward, right, up)
* Add coordinate system at camera position

‚ñ° Camera smoothing improvements

* Tune interpolation parameters for smooth follow
* Add acceleration/deceleration curves
* Prevent camera jitter at low speeds
* Add lag compensation for high-speed movement

‚ñ° Camera collision detection

* Prevent camera from clipping through objects
* Push camera forward when obstructed
* Add subtle camera shake when obstructed
* Smooth transitions when collision state changes

---

## HEADLESS MODE ENHANCEMENTS

‚ñ° Improve headless testing capabilities

* Add scripted input injection for automated tests
* Create input replay system from recorded sessions
* Add visual state dumps (JSON snapshots)
* Generate timeline logs of entity states

‚ñ° Headless performance profiling

* Add detailed frame timing breakdown
* Profile each game system separately
* Generate performance reports
* Compare headless vs graphics mode overhead

‚ñ° Headless rendering alternatives

* Implement ASCII art improvements (better graphics)
* Add HTML/SVG output for debugging
* Create sprite-based 2D terminal rendering
* Generate animated GIFs of simulation

‚ñ° Automated test suite using headless mode

* Unit tests for all game systems
* Integration tests for multi-system interactions
* Regression tests for bug fixes
* Performance benchmarks over time

---

## INPUT SYSTEM OVERHAUL

‚ñ° Graceful input handling without GLFW

* Abstract input layer from GLFW specifics
* Support multiple input backends
* Fallback to raw Windows input if GLFW fails
* Test keyboard/mouse without window

‚ñ° Scripted input for testing

* Load input sequences from files
* Replay recorded gameplay for debugging
* Generate random input for stress testing
* Create AI-driven input for automated gameplay

‚ñ° Gamepad support without crashes

* Fix XInput loading issues first
* Add support for DirectInput
* Support SDL_GameController as alternative
* Map gamepad controls to game actions

‚ñ° Input configuration system

* Save/load key bindings from file
* In-game key rebinding UI
* Support multiple control schemes
* Add input sensitivity settings

---

## GRAPHICS SYSTEM ALTERNATIVES

‚ñ° **Upgrade to OpenGL 4.6 (Latest Stable ‚Äì HIGH PRIORITY)**

* **Current:** Legacy OpenGL 2.1 (2006) ‚Äì 19 years old!
* **Target:** OpenGL 4.6 (2017) ‚Äì Latest stable version
* **Critical Issue:** Modern GPUs may poorly support legacy OpenGL 2.1
* This upgrade may FIX the current GLFW initialization crashes!

**WHY OpenGL 4.6:**
‚úì Best driver support on modern GPUs (NVIDIA, AMD, Intel)
‚úì All modern features included (compute, tessellation, geometry shaders)
‚úì SPIR-V shader support (portable shaders)
‚úì Bindless textures and buffers for massive performance
‚úì Multi-draw indirect with count
‚úì Anisotropic filtering standardized
‚úì Better debugging with `KHR_debug`
‚úì Lower CPU overhead, better multithreading
‚úì Will work on all GPUs from 2017+ (7+ years of hardware)

**CURRENT CODE ISSUES (`src/Viewport3D.cpp:497‚Äì499`):**

```cpp
// PROBLEM: Requesting ancient OpenGL 2.1
glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);
glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 1);
// Missing: Core profile, forward compatibility
```

**MIGRATION PLAN:**
‚ñ° *Phase 1: Immediate Fix ‚Äì Request Modern OpenGL*
- Change `Viewport3D.cpp` to request OpenGL 4.6 core profile
- **This may immediately fix GLFW crash!**
- Add fallback chain: 4.6 ‚Üí 4.5 ‚Üí 4.3 ‚Üí 3.3 ‚Üí 2.1
- Query actual OpenGL version after context creation
- Log GPU info: vendor, renderer, version, extensions
- Create `graphics_capabilities.log` on startup

````
Code changes needed:
```cpp
glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);
glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 6);
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
```
````

‚ñ° *Phase 2: Add GLAD for Modern OpenGL Function Loading*
- Generate GLAD (OpenGL 4.6, Core profile)
- Include `glad/glad.h` before any OpenGL headers
- Call `gladLoadGLLoader()` after context creation
- Replace current OpenGL headers with GLAD
- Required for OpenGL 3.2+ on Windows

‚ñ° *Phase 3: Remove Legacy Immediate Mode Rendering*
- Find all `glBegin/glEnd` calls (deprecated in 3.0+)
- Replace with modern VAO/VBO rendering
- Remove `glVertex`, `glColor`, `glTexCoord` calls
- Use `glDrawArrays/glDrawElements` instead
- **Estimate:** ~500 lines of code to update

‚ñ° *Phase 4: Implement Modern Rendering Pipeline*
- Mesh class with VAO/VBO/EBO
- UBOs for shader constants; SSBOs for large data
- Shader management; pipeline documented (see docs)

‚ñ° *Phase 5: Shader-Based Rendering (Core Profile Required)*
- Vertex + fragment shaders for everything
- PBR materials, normal mapping
- Compute shaders for particles/physics/culling
- Shader management: compile, link, cache

‚ñ° *Phase 6: Advanced OpenGL 4.6 Features*
- DSA, pipeline objects, MDI, bindless textures
- SPIR-V, persistent mapping, compute-driven rendering

**FALLBACK STRATEGY:**
‚ñ° Try versions in order until one works: 4.6 ‚Üí 4.5 ‚Üí 4.3 ‚Üí 3.3 ‚Üí 2.1
‚ñ° Maintain compatibility renderer for old hardware; feature flags per backend

**ESTIMATED EFFORT:** 70‚Äì130 hours (2‚Äì3 weeks full-time)

**IMMEDIATE ACTION (Try First):**

* Change OpenGL version request from 2.1 to 4.6
* Add GLAD for function loading
* Test if GLFW initialization succeeds

‚ñ° Fix GLFW context creation for modern OpenGL (**DO THIS FIRST!**)
‚ñ° Add GLAD or GLEW for extension loading
‚ñ° Investigate GLFW alternatives
‚ñ° Software rendering fallback
‚ñ° Add comprehensive graphics capability detection
‚ñ° Shader system improvements

---

## *** LEGACY ENGINE IMPROVEMENTS ***

### IMMEDIATE TASKS (Next 1‚Äì2 weeks)

‚ñ° Test distance-based camera hiding thoroughly
‚ñ° Player system roadmap alignment
‚ñ° Performance profiling and optimization
‚ñ° Input system improvements (bindings, sensitivities, controller, recording)

### SHORT-TERM GOALS (Next 1‚Äì2 months)

‚ñ° Enhanced graphics features (lighting, textures, fog, particles)
‚ñ° Audio system implementation (assets + settings UI)
‚ñ° Game mechanics expansion (collision, physics, AI, scoring/health)
‚ñ° User interface improvements (pause, settings, tutorials)

### MEDIUM-TERM FEATURES (3‚Äì6 months)

‚ñ° Multiplayer/networking support
‚ñ° Level/world system
‚ñ° Advanced graphics
‚ñ° Modding support

### LONG-TERM VISION (6+ months)

‚ñ° Cross-platform support

‚è≥ **Advanced engine features [ECS V2 IN PROGRESS ‚Äì 95% Complete]**
‚úÖ ECS V2: Archetype-based system (EntityHandle, Archetype, Manager, SchedulerV2)
üîß Remaining: EntityManagerV2 ‚Äì component copying during archetype transitions
**Impact:** 10‚Äì50x iteration, 70% less memory, 4‚Äì8x multicore speedup
**Next:** Fix component array synchronization (30‚Äì60 min est.)

**FOLLOW-UP MIGRATION TASKS:**
‚ñ° Compatibility facade (legacy `EntityManager` ‚Üí `EntityManagerV2`)
‚ñ° Conversion pass (legacy ‚Üí archetype storage) + regression tests
‚ñ° Update Simulation bootstrap to SchedulerV2 behind a feature flag

‚ñ° Physics engine integration (Bullet/PhysX)
‚ñ° Animation system
‚ñ° AI pathfinding system

---

## CODE QUALITY & MAINTENANCE

‚úÖ Comprehensive TODO document (2025-10-10)

‚ñ° Fix compiler warnings
‚ñ° Code cleanup & refactoring (split `Viewport3D.cpp`, remove dead code)
‚ñ° Add debug/release/profile build configs
‚ñ° Improve error handling (RAII, exceptions as appropriate)
‚ñ° Memory leak detection (Valgrind/Dr. Memory; smart pointers)

---

## TESTING & QUALITY ASSURANCE

‚ñ° Create automated test suite (headless mode)
‚ñ° Unit tests per system (camera, input, ECS, physics, rendering)
‚ñ° Integration testing (pipelines)
‚ñ° Performance testing & benchmarking
‚ñ° Stress testing
‚ñ° Crash reporting & debugging (stack traces, minidumps, last-N input)

---

## DOCUMENTATION IMPROVEMENTS

‚ñ° Windows setup guide
‚ñ° Headless mode usage
‚ñ° Architecture documentation (diagrams)
‚ñ° API documentation (Doxygen)
‚ñ° Developer onboarding guide
‚ñ° User manual (when applicable)

---

## BUILD SYSTEM ENHANCEMENTS

‚ñ° Robust Makefile (platform-detect, paths, verbosity)
‚ñ° Build configurations (debug/release/profile/sanitize)
‚ñ° Parallel builds
‚ñ° Precompiled headers
‚ñ° Dependency tracking

---

## PLATFORM COMPATIBILITY

‚ñ° Test on Windows versions
‚ñ° Test with compilers (GCC/MSVC/Clang)
‚ñ° Prepare Linux/macOS ports

---

## TECHNICAL DEBT & OPTIMIZATION

‚ñ° Memory management improvements
‚ñ° Build system enhancements
‚ñ° Security and stability

---

## RESEARCH & EXPERIMENTATION

‚ñ° VR/AR, ML, cloud gaming explorations
‚ñ° Performance research (rendering, physics)
‚ñ° New input methods (gesture, voice)

---

## ADVANCED FEATURES & SYSTEMS

‚ñ° AI Systems (BTs/State machines, pathfinding, combat AI, ML)
‚ñ° Procedural Generation (terrain, missions, encounters)
‚ñ° Networking & Multiplayer (sync, prediction, matchmaking)
‚ñ° VR/AR Support (future)
‚ñ° Modding & Extensibility (scripting, hot-reload, editor)
‚ñ° Analytics & Telemetry

---

## REFERENCE DOCUMENTS

See `docs/todo/TODO_IMPROVEMENTS.md` for detailed 2025-10-10 fixes and improvements
See `docs/` folder for system documentation
See `todo_*.txt` files for system-specific task breakdowns

---

## COMPLETION TRACKING (2025-10-10)

**Major accomplishments today:**

* ‚úÖ SDL dependencies completely removed
* ‚úÖ Headless mode fully functional for testing
* ‚úÖ Camera direction corrected (facing player)
* ‚úÖ Frame limiter implemented
* ‚úÖ Comprehensive documentation created
* ‚ö†Ô∏è GLFW and XInput crashes identified (needs investigation)
* ‚ö†Ô∏è Build system needs Windows compatibility improvements

**Next priorities:**

1. Fix GLFW initialization crash (high priority ‚Äì blocks graphics)
2. Implement automated testing using headless mode
3. Complete ECS V2 final bug fix (component array sync)
4. Add DLL checker/copier script
5. Fix compiler warnings

---

# ACTION BOARD ‚Äî Next 14 Days (distilled)

**Blockers (unblock graphics + input):**

* [ ] GLFW context creation: switch to OpenGL 4.6 Core + fallback chain; log GPU/driver; verify init success.
* [ ] XInput crash guard: delay-load + version probing (1_4 ‚Üí 1_3 ‚Üí 9_1_0); optionalize gamepad.

**Enablers (reduce friction):**

* [ ] DLL checker/copy script (PowerShell) wired into pre-run step.
* [ ] Clean target: cross‚Äëplatform `clean` (PowerShell + Bash) verified in CI on Windows + Linux.
* [ ] Shell command cleanup: root-cause the `'true'`/path errors in scripts; standardize env checks.

**Core progress:**

* [ ] ECS V2 transition copy fix + fuzz/regression suite for add/remove during iteration.
* [ ] Headless test harness: scripted input playback + JSON state snapshots per frame.

**Quick wins:**

* [ ] Compile warnings zero: [[maybe_unused]]/casts; enable `-Werror` on CI only.
* [ ] Graphics capability dump on startup ‚Üí `graphics_info.log`.

**Definitions of Done (DoD)**

* GLFW/XInput: cold boot to main loop on two hardware configs, logs show versions, no crashes.
* ECS V2 bug: 10k-entity fuzz passes, ASAN clean, determinism test green.
* Headless tests: sample playback runs in CI (<60s), artifact uploads (snapshots + perf CSV).
* DLL/clean/scripts: CI green on Windows + Linux; manual run doc updated.

**Owner placeholders:**

* Rendering: ___
* Systems/ECS: ___
* Tooling/CI: ___
* Input: ___
* Docs: ___

---

## Risk Radar & Mitigations

* **Legacy GL dependency** ‚Üí Migrate to 4.6 core; maintain 2.1 compatibility backend as fallback.
* **Windows-only tooling** ‚Üí Introduce Bash equivalents + CI matrix; document MSYS2 vs native.
* **Input backend fragility** ‚Üí Abstract input layer; feature-detect at runtime; graceful no‚Äëgamepad path.
* **Regression risk during ECS transition** ‚Üí Command buffering for structural changes; fuzz + snapshots.

---

*Last updated: 2025‚Äë10‚Äë25*

## New Todos (added 2025-10-25 ‚Äì batch 3)

### Rendering & Graphics Modernization

* [ ] Create OpenGL debug context and wire `KHR_debug` callback with severity filtering and on-screen toast in dev builds.
* [ ] Implement vendor-specific workarounds table (NVIDIA/AMD/Intel) for known driver quirks; log when applied.
* [ ] Shader hot-reload: file watcher + safe recompile pipeline (fallback to last good binary on error).
* [ ] Offline shader validation step (glslangValidator/spirv-tools) in CI pre-merge.
* [ ] GPU timer queries for per-pass timings (opaque, transparent, post, UI) and export CSV.
* [ ] Frustum culling prototype with per-mesh bounding spheres and a coarse BVH.
* [ ] Optional wireframe/normal/UV debug views bound to dev hotkeys.
* [ ] Floating-origin / camera-relative rendering to mitigate precision jitter at large coordinates.
* [ ] HDR pipeline spike with ACES tonemapping and screenshot diffs vs LDR baseline.
* [ ] Texture/mesh streaming stubs (LRU budgets; async IO placeholder).

### Tooling & CI

* [ ] GitHub Actions matrix: Windows (MSVC + MinGW), Ubuntu (clang/gcc); cache compiler artifacts.
* [ ] clang-format + clang-tidy gates; pre-commit hooks with autofix on CI for PRs.
* [ ] Code coverage (gcov/llvm-cov) for headless tests; threshold badge in README.
* [ ] Sanitizers: ASAN/UBSAN on Linux, clang-cl ASAN job on Windows; nightly TSAN run.
* [ ] Package artifacts: zipped binaries + logs for each CI job; attach to releases.
* [ ] ADRs (Architecture Decision Records) folder with template; require ADR for major subsystem changes.

### Crash Handling & Telemetry

* [ ] Integrate Crashpad/Breakpad for minidumps; symbol server setup and automated upload.
* [ ] In-engine crash screen with run id, build hash, last 200 log lines, and repro seed.
* [ ] Frame ring buffer: persist last N input/events to aid post-crash analysis.
* [ ] Structured logging (JSON) with session/user-less ids; log rotation policy.

### Save/Settings Infrastructure

* [ ] Centralized settings schema (TOML/JSON) with versioning and migration hooks.
* [ ] Safe mode boot flag to reset graphics/input settings after failed launch.
* [ ] Savegame format v0: compressed (zstd), checksum, and basic metadata (version, playtime, location).
* [ ] Optional cloud saves abstraction; local-only fallback.

### Accessibility & Localization

* [ ] Colorblind-safe HUD palettes; contrast checks for UI text.
* [ ] Reduce-motion preset (disable camera bob/shake, cap FOV changes per second).
* [ ] Input: toggle vs hold for key actions; remappable dead zones for sticks.
* [ ] Localization scaffolding: string tables, pluralization rules, UTF-8 everywhere; RTL stub switch.
* [ ] Font fallback chain with SDF fonts for crisp scaling.

### Networking Readiness (Pre-proto)

* [ ] Deterministic tick runner (fixed dt) and command recording for future rollback.
* [ ] Snapshot & delta serialization stubs for ECS components (opt-in per component).
* [ ] Interest management draft API (proximity/visibility filters).

### Gameplay & Systems

* [ ] Flight model prototypes: arcade vs assisted vs sim; config bundles and A/B test hook.
* [ ] Autopilot modes: hold attitude, match velocity, approach target with safety envelope.
* [ ] HUD targeting revamp: lock cone visualization, lead indicators, range gating.
* [ ] Mission generator stub with seed-based tasks (courier, scan, patrol) to exercise systems.

### Solar System & Precision

* [ ] Elliptical orbit support (Kepler elements) with mean anomaly update; switchable to circular.
* [ ] Hierarchical reference frames (planet-centric) to avoid double precision requirements.
* [ ] Time scaling controls (pause/slow/fast) with stable integrator bounds.
* [ ] Level-of-detail rules for distant bodies (billboards ‚Üí meshes ‚Üí detailed).

### Input & Audio

* [ ] Raw mouse input path (low-latency) with optional filter toggle.
* [ ] Input conflict resolver: display overlapping bindings and suggest alternatives.
* [ ] Gamepad rumble events tied to weapon fire, impacts, and afterburner.
* [ ] Audio asset pipeline: OGG/FLAC decode, streaming music channel, ducking rules, and mixer profiler.

### Packaging & Docs

* [ ] First-run hardware/driver probe with ‚Äúsupported/unsupported‚Äù checklist and save-to-file.
* [ ] License audit of third-party code; generate NOTICE file automatically.
* [ ] CONTRIBUTING.md with issue/PR templates and coding standards.
* [ ] High-level architecture diagram (C4 level 2) + system sequence diagrams for hot paths.

### QA & Performance

* [ ] Golden-image tests: offscreen FBO renders diffed with tolerance; store artifacts on CI.
* [ ] Long-haul soak test (8 hours, headless) with memory/leak watch and periodic snapshots.
* [ ] Perf budgets per frame (ms targets per subsystem) with assert-on-regression in CI perf job.
* [ ] Automated scene builder (many ships/particles) for worst-case stress.
